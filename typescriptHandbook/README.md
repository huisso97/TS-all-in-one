# Typscript Handbook

## 핸드북 정리

### 타입스크립트의 목표

- 자바스크립트 프로그램의 정적 타입 검사자
- 코드가 실행되기 전에 실행하고(정적), 프로그램 타입이 정확한지 확인하는 도구(타입 검사)

### 실습 목표

- [ ] 일반적으로 사용하는 타입스크립트 구문 및 패턴을 읽고 이해하기
- [ ] 중요한 컴파일러 옵션의 효과 설명하기
- [ ] 대부분의 경우에서 타입 시스템 동작을 올바르게 예측하기
- [ ] 간단한 함수, 객체 또는 클래스에 대한 .d.ts 선언 작성하기

### The Basics

#### 정적 타입 검사

- 자바사크립트 런타임은 코드가 실행될 때 자신이 무엇을 해야 할지 결정하기 위하여 값의 타입, 즉 해당 값이 어떤 동작과 능력을 가지고 있는지를 확인한다.
- 예를 들어, `string`과 `number`과 같은 원시 타입의 값의 경우, `typeof`연산자를 사용하면 각 값들의 타입을 실행 시점에 알 수 있다. 그러나 함수와 같은 그 밖의 값들의 경우, 해당 값의 타입을 실행 시점의 메커니즘은 존재하지 않는다.

```javascript
function fn(x) {
	return x.flip();
```

위 코드에서 자바스크립트는 `fn`를 호출하여 무슨 일이 벌어지는지 봄으로써, 인자로 전달된 `x` 객체가 `flip` 프로퍼티를 호출할 수 있는지 확인할 수 있다. 즉, 코드가 어떤 동작 결과를 보일지 코드를 작성하는 동안에는 어렵다.

- 이때, 타입이란 어떤 값이 `fn`으로 전달되어, 어떤 값이 실행에 성공 혹은 실패할 것임을 설명하는 개념이다.
- 자바스크립트는 오직 동적 타입만을 제공하며, 코드를 실행해야만 어떤 일이 벌어지는지 비로소 확인이 가능하다.
- 그러므로, 정적 타입 시스템을 활용하여 코드가 실행되기 전 코드에 대해 예측하는 것이다.

#### 예외가 아닌 실행 실패

- 자바스크립트 런타임은 예기치 못한 문제가 발생했을 때 에러를 직접 말해주기도 하지만, 우리의 의도와 다르게 반응하기도 한다.

```javascript
const user = {
  name: "Daniel",
  age: 26,
};
user.location; // undefined 를 반환
```

위와 같이 객체에 존재하지 않는 프로퍼티 접근 시, 오류가 아닌 undefined가 반환된다.

- 정적 타입 시스템은 이러한 "유효한" 자바스크립트 코드일지라도, 오류로 간주되는 경우라면 해당 프로퍼티가 정의되지 않았다는 오류를 알려준다.
- 이외에도 오타, 호출되지 않은 함수("()"가 붙어있지 않은 함수), 논리 오류 등으로 인한 버그를 잡아낸다.

#### tsc, TypeScript 컴파일러

1. 실습 폴더 생성
2. npx init -y 명령어로 package.json 생성
3. npm install typescript
4. npx tsc hello.ts

- 공식문서에서는 타입스크립트 컴파일러 tsc를 전역으로 설치하였기 때문에, tsc 명령어를 사용할 수 있지만, 나의 경우, 로컬 node_modules 패키지로 실행하기 때문에, npx 도구를 사용한다.

5. hello.js 파일 생성 확인

- tsc가 hello.ts 파일을 자바스크립트 파일로 컴파일 또는 변형한 결과물

#### 오류 발생시키기

`--noEmitOnerror`컴파일러 옵션을 사용하여, 타입 오류가 나는 코드가 있으면, 자바스크립트로 변환하지 않는다.

```bash
npx tsc --noEmitOnError hello.ts
```

#### 명시적 타입

아래와 같이 인자들에 대해 타입을 명시함으로써 해당 함수를 올바르게 사용할 수 있도록 해준다.

```typescript
function greet(person: string, date: Date) {
  console.log(`Hello ${person}, today is ${date.toDateString()}!`);
}

greet("Maddison", Date());
// Argument of type 'string' is not assignable to parameter of type 'Date'.
```

- 자바스크립트에서 Date()를 호출 시, typeof Date() === string 이지만, 타입스크립트에서는 new Date() 가 Date 타입을 반환하기 때문에, 위의 코드에서 인자가 Date 타입의 값을 받을 수 있도록
- Date() -> new Date()로 바꿔야한다.

#### 다운레벨링

타입스크립트는 새 버전의 ECMAScript 코드를 ECMAScript 5와 같은 예전 버전의 것들로 다시 작성한다. 이렇게 하위 버전으로 바꾸는 과정을 다운레벨링이라고 부른다.

- `--target` 플래그를 설정하여 보다 최근 버전을 타겟으로 변환을 수행할 수도 있다.

#### 엄격도

- `noImplicitAny` : `any`로 추론되는 변수에 대해 오류 발생
- `strictNullChecks` : `null`과 `undefined`가 다른 타입의 값에 할당될 수 없도록 함
